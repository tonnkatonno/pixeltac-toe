import { Start as f6 } from "./WebSharper.Core.JavaScript/Runtime.js"
import { Create as f7, Lazy as f8, GetOptional as f9, SetOptional as f_, OnLoad as f$ } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(ga){ return"Dispose"in ga;}
function b(){ const ga=localStorage.getItem("packs");let gb=ga==null||ga==""?U.Empty:((V(V(W())))())(JSON.parse(ga));Y().Set(gb);let gc=c();const gd=localStorage.getItem("c1");gc.Set(gd==null||gd==""?null:u0034(gd));let ge=d();const gf=localStorage.getItem("c2");ge.Set(gf==null||gf==""?null:u0034(gf));u0035((gi) => { localStorage.setItem("packs", JSON.stringify(((X(X(W())))())(gi)));}, Y().View);u0035((gi) => { localStorage.setItem("c1", gi==null?"":gi.$0);}, c().View);u0035((gi) => { localStorage.setItem("c2", gi==null?"":gi.$0);}, d().View);u0035((gi) => { const gj=f(gi);if(gj==null){ if(g(gi)){ const gk=null;b4(b0(() => b1(b2(1500), () => { h().Set(null);i().Set(true);return b3();})), null);} else void 0;} else gj.$0.$==1?(j().Set(j().Get()+1),h().Set(u0034(bd)),i().Set(false)):(k().Set(k().Get()+1),h().Set(u0034(be)),i().Set(false));}, e().View);const gg=u0037((gi, gj, gk) => { const gl=f(gi);if(gl==null)return g(gi)?"A roll of the dice follows":"Next player moves: "+bg(s().Get().$===0?t().Get():u().Get())+" ("+bg(r(s().Get()))+")";else { const gm=gl.$0;return"Wins: "+bg(gm.$===0?t().Get():u().Get())+" ("+bg(r(gm))+"). Current game status\u2014"+bg(t().Get())+": "+String(gj)+" | "+bg(u().Get())+": "+String(gk);} }, e().View, k().View, j().View);const gh=cy.EmbedView(u0036((gi, gj) =>!gi?m():gj?n():cy.Element("div", [cx.Create("id", "game-container")], [cy.Element("h1", [], [cy.TextNode("TicTacToe")]), o(), cy.Element("div", [cx.Create("id", "score-wrapper")], [p()]), cy.Element("div", [cx.Create("class", "status")], [cy.TextView(gg)]), cy.Element("button", [cx.HandlerImpl("click", () =>() => q())], [cy.TextNode("New Game")])]), l().View, i().View));cB("");cy.RunById("main", gh);}
function c(){ return bC.chosenSkin1;}
function d(){ return bC.chosenSkin2;}
function e(){ return bC.board;}
function f(ga){ return ck((gb) => { let gc;if(gb.$==1){ const gd=gb.$0;if(gd!=null&&gd.$==1){ if(gb.$0.$0.$==1){ if(gb.$1.$==1){ const ge=gb.$1.$0;if(ge!=null&&ge.$==1){ if(gb.$1.$0.$0.$==1){ if(gb.$1.$1.$==1){ const gf=gb.$1.$1.$0;gc=gf!=null&&gf.$==1?gb.$1.$1.$0.$0.$==1?gb.$1.$1.$1.$==0?1:2:2:2;} else gc=2;} else gc=2;} else gc=2;} else gc=2;} else if(gb.$1.$==1){ const gg=gb.$1.$0;if(gg!=null&&gg.$==1){ if(gb.$1.$0.$0.$==0){ if(gb.$1.$1.$==1){ const gh=gb.$1.$1.$0;gc=gh!=null&&gh.$==1?gb.$1.$1.$0.$0.$==0?gb.$1.$1.$1.$==0?0:2:2:2;} else gc=2;} else gc=2;} else gc=2;} else gc=2;} else gc=2;} else gc=2;switch(gc){ case 0:return u0034(be);case 1:return u0034(bd);case 2:return null;} }, bl(bm(cf(() => cg((gb) => bj([bu(ga, gb, 0), bu(ga, gb, 1), bu(ga, gb, 2)]), G(0, 2)))), bl(bm(cf(() => cg((gb) => bj([bu(ga, 0, gb), bu(ga, 1, gb), bu(ga, 2, gb)]), G(0, 2)))), bj([bj([bu(ga, 0, 0), bu(ga, 1, 1), bu(ga, 2, 2)]), bj([bu(ga, 0, 2), bu(ga, 1, 1), bu(ga, 2, 0)])]))));}
function g(ga){ return ci((gb) => gb!=null, cf(() => ch((gb) => cg((gc) => bu(ga, gb, gc), G(0, 2)), G(0, 2))));}
function h(){ return bC.lastWinner;}
function i(){ return bC.showDiceRoll;}
function j(){ return bC.wins2;}
function k(){ return bC.wins1;}
function l(){ return bC.namesSet;}
function m(){ return bC.nameInputView;}
function n(){ return bC.diceRollView;}
function o(){ return cy.BindView((ga) => ga, u0039((ga) => cy.Element("div", [cx.Create("class", "game-board")], bm(cf(() => ch((gb) => cg((gc) => cy.Element("button", bm(cf(() => cj([cx.Create("class", "cell")], cf(() => cj(bu(ga, gb, gc)!=null?[cx.Create("disabled", "disabled")]:[], cf(() =>[cx.HandlerImpl("click", () =>() => { if(!v()&&bu(ga, gb, gc)==null&&f(ga)==null){ const gd=cz(ga);bv(gd, gb, gc, u0034(s().Get()));e().Set(gd);return f(gd)==null?s().Set(s().Get().$==1?be:bd):null;} else return null;})])))))), [w(gb, gc, ga)]), G(0, 2)), G(0, 2))))), e().View));}
function p(){ return bC.scoreboard;}
function q(){ const ga=h().Get();if(ga==null){ i().Set(true);let gb=e();const gc=cO(3, () => cP(3, null));let gd=(gc.dims=2,gc);gb.Set(gd);x().Set(null);} else if(ga.$0.$==1){ y().Set(be);s().Set(be);let ge=e();const gf=cO(3, () => cP(3, null));let gg=(gf.dims=2,gf);ge.Set(gg);i().Set(false);x().Set(null);} else { y().Set(bd);s().Set(bd);let gh=e();const gi=cO(3, () => cP(3, null));let gj=(gi.dims=2,gi);gh.Set(gj);i().Set(false);x().Set(null);} }
function r(ga){ return ga.$==1?"O":"X";}
function s(){ return bC.currentPlayer;}
function t(){ return bC.player1;}
function u(){ return bC.player2;}
function v(){ return Y().Get().$==0?false:c().Get()==null||d().Get()==null;}
function w(ga, gb, gc){ if(v()){ const gd=er(ga*3+gb, bn(Y().Get()));if(gd==null)return cy.TextNode("");else { const ge=gd.$0;const gf=J(c().Get(), u0034(ge))||J(d().Get(), u0034(ge));let gg=cx.Create("src", ge);const gh=c().Get();const gi=d().Get();let gj=cx.Create("style", "width:60px;height:60px;object-fit:cover;border:3px solid "+bg(gh!=null&&gh.$==1?gh.$0==ge?"#4caf50":gi!=null&&gi.$==1?gi.$0==ge?"#e53935":"#ccc":"#ccc":gi!=null&&gi.$==1?gi.$0==ge?"#e53935":"#ccc":"#ccc")+";cursor:"+bg(gf?"not-allowed":"pointer")+";");let gk=[gg, gj, cx.HandlerImpl("click", () =>() => { if(!gf){ const go=c().Get();const gp=d().Get();return go!=null&&go.$==1?gp==null?d().Set(u0034(ge)):null:c().Set(u0034(ge));} else return null;})];return cy.Element("img", gk, []);} } else { const gl=bu(gc, ga, gb);if(gl==null)return cy.TextNode("");else { const gm=gl.$0;const gn=B(gm);return gn==null?cy.TextNode(r(gm)):cy.Element("img", [cx.Create("src", gn.$0), cx.Create("style", "width:60px;height:60px;object-fit:contain;")], []);} } }
function x(){ return bC.diceRollAnim;}
function y(){ return bC.starter;}
function z(){ const ga=C();x().Set(u0034(ga));const gb=null;b4(b0(() => b1(b2(1500), () => cd(ga%2===0?(y().Set(be),s().Set(be),b3()):(y().Set(bd),s().Set(bd),b3()), b0(() => { let gc=e();const gd=cO(3, () => cP(3, null));let ge=(gd.dims=2,gd);gc.Set(ge);x().Set(null);i().Set(false);return b3();})))), null);}
function A(ga, gb, gc){ return cy.Element("div", [cx.Create("style", "margin:4px 0;")], [cy.TextNode("Pack #"+String(gb+1)+":"), cy.Element("div", [cx.Create("style", "display:grid;grid-template-columns:repeat(3,70px);gap:4px;margin-top:4px;")], bm(cf(() => bo((gd) => cy.Element("img", [cx.Create("src", gd), d8("style", u0039((ge) =>"width:70px;height:70px;object-fit:cover; border:2px solid "+bg(ge!=null&&ge.$==1?ge.$0==gd?ga===c()?"#4caf50":"#e53935":"#ccc":"#ccc")+";cursor:pointer;", ga.View)), cx.HandlerImpl("click", () =>() => ga.Set(u0034(gd)))], []), gc))))]);}
function B(ga){ return ga.$==1?d().Get():c().Get();}
function C(){ return 1+D().Next_1(6);}
function D(){ return bC.rand;}
class E { Equals(ga){ return this===ga;} GetHashCode(){ return -1;} }
class F extends E { }
function G(ga, gb){ const gc=1+gb-ga;return gc<=0?[]:cl(gc, (gd) => gd+ga);}
function H(ga){ throw new Error(ga);}
function I(ga){ return[ga.K, ga.V];}
function J(ga, gb){ if(ga===gb)return true;else { const gc=typeof ga;if(gc=="object"){ if(ga===null||ga===void 0||gb===null||gb===void 0||!J(typeof gb, "object"))return false;else if("Equals"in ga)return ga.Equals(gb);else if("Equals"in gb)return false;else if(ga instanceof Array&&gb instanceof Array)return K(ga, gb);else if(ga instanceof Date&&gb instanceof Date)return L(ga, gb);else { const gd=[true];let ge;for(var gg in ga)if(((gh) => { gd[0]=!ga.hasOwnProperty(gh)||gb.hasOwnProperty(gh)&&J(ga[gh], gb[gh]);return!gd[0];})(gg))break;if(gd[0]){ let gf;for(var gh in gb)if(((gi) => { gd[0]=!gb.hasOwnProperty(gi)||ga.hasOwnProperty(gi);return!gd[0];})(gh))break;} return gd[0];} } else return gc=="function"&&("$Func"in ga?ga.$Func===gb.$Func&&ga.$Target===gb.$Target:"$Invokes"in ga&&"$Invokes"in gb&&K(ga.$Invokes, gb.$Invokes));} }
function K(ga, gb){ let gc;let gd;if(bw(ga)===bw(gb)){ gc=true;gd=0;while(gc&&gd<bw(ga)){!J(bt(ga, gd), bt(gb, gd))?gc=false:void 0;gd=gd+1;} return gc;} else return false;}
function L(ga, gb){ return ga.getTime()===gb.getTime();}
function M(ga, gb){ if(ga===gb)return 0;else { const gc=typeof ga;switch(gc=="function"?1:gc=="boolean"?2:gc=="number"?2:gc=="string"?2:gc=="object"?3:0){ case 0:return typeof gb=="undefined"?0:-1;case 1:return H("Cannot compare function values.");case 2:return ga<gb?-1:1;case 3:if(ga===null)return -1;else if(gb===null)return 1;else if("CompareTo"in ga)return ga.CompareTo(gb);else if("CompareTo0"in ga)return ga.CompareTo0(gb);else if(ga instanceof Array&&gb instanceof Array)return N(ga, gb);else if(ga instanceof Date&&gb instanceof Date)return O(ga, gb);else { const gd=[0];let ge;for(var gg in ga)if(((gh) =>!ga.hasOwnProperty(gh)?false:!gb.hasOwnProperty(gh)?(gd[0]=1,true):(gd[0]=M(ga[gh], gb[gh]),gd[0]!==0))(gg))break;if(gd[0]===0){ let gf;for(var gh in gb)if(((gi) =>!gb.hasOwnProperty(gi)?false:!ga.hasOwnProperty(gi)&&(gd[0]=-1,true))(gh))break;} return gd[0];} break;} } }
function N(ga, gb){ let gc;let gd;if(bw(ga)<bw(gb))return -1;else if(bw(ga)>bw(gb))return 1;else { gc=0;gd=0;while(gc===0&&gd<bw(ga)){ gc=M(bt(ga, gd), bt(gb, gd));gd=gd+1;} return gc;} }
function O(ga, gb){ return M(ga.getTime(), gb.getTime());}
function P(ga){ const gb=typeof ga;return gb=="function"?0:gb=="boolean"?ga?1:0:gb=="number"?ga:gb=="string"?Q(ga):gb=="object"?ga==null?0:ga instanceof Array?R(ga):S(ga):0;}
function Q(ga){ let gb;if(ga===null)return 0;else { gb=5381;for(let gc=0, gd=ga.length-1;gc<=gd;gc++)gb=T(gb, ga[gc].charCodeAt());return gb;} }
function R(ga){ let gb=-34948909;for(let gc=0, gd=bw(ga)-1;gc<=gd;gc++)gb=T(gb, P(bt(ga, gc)));return gb;}
function S(ga){ if("GetHashCode"in ga)return ga.GetHashCode();else { const gb=[0];let gc;for(var gd in ga)if(((ge) => { gb[0]=T(T(gb[0], Q(ge)), P(ga[ge]));return false;})(gd))break;return gb[0];} }
function T(ga, gb){ return(ga<<5)+ga+gb;}
class U { static Empty=f7(U, {$:0});static Cons(ga, gb){ return f7(U, {$:1, $0:ga, $1:gb});} GetEnumerator(){ return new da(this, null, (ga) => { const gb=ga.s;return gb.$==0?false:(ga.c=gb.$0,ga.s=gb.$1,true);}, void 0);} }
function V(ga){ return() =>(gb) => { const gc=ga();return bh(bw(gb), (gd) => gc(bt(gb, gd)));};}
function W(){ return() =>(ga) => ga;}
function X(ga){ return() =>(gb) => { const gc=[];const gd=ga();bi((ge) => { gc.push(gd(ge));}, gb);return gc;};}
function Y(){ return bB.skinPacks;}
function Z(ga){ const gb=9;if(ga.files.length>gb)alert("Only the first "+String(gb)+" images will be processed. The rest will be ignored.");const gc=bp((ge) => ge==null?null:u0034(ge), bm(cf(() => { const ge=gb-1;const gf=ga.files.length-1;let gg=M(ge, gf)===-1?ge:gf;let gh=G(0, gg);return cg((gi) => ga.files.item(gi), gh);})));const gd=null;cc(b0(() => b1(cb(bo(u0031, gc)), (ge) => { Y().Set(bl(Y().Get(), bj([bj(ge)])));return b3();})), null);}
function u0030(){ return bB.uploadSkinPackView;}
function u0031(ga){ const gb=null;return b0(() => b1(ce((gc, gd) => { const ge=new FileReader();ge.onload=() => { gc(String(ge.result));};ge.onerror=() => { gd(new Error("read error"));};ge.readAsDataURL(ga);}), (gc) => b1(ce((gd, ge) => { const gf=new Image();gf.onload=() => { const gg=globalThis.document.createElement("canvas");gg.width=u0032();gg.height=u0032();gg.getContext("2d").drawImage(gf, 0, 0, u0032(), u0032());gd(gg.toDataURL("image/jpeg", u0033()));};gf.onerror=() => { ge(new Error("img error"));};gf.src=gc;}), (gd) => ca(gd))));}
function u0032(){ return bB.thumbSize;}
function u0033(){ return bB.jpegQuality;}
function u0034(ga){ return{$:1, $0:ga};}
function u0035(ga, gb){ function gc(){ bD(gb(), ga, () => { b_().Fork(gc);});} b_().Fork(gc);}
function u0036(ga, gb, gc){ return u0038(() => bE(ga, gb(), gc()));}
function u0037(ga, gb, gc, gd){ return u0038(() => bF(ga, gb(), gc(), gd()));}
function u0038(ga){ const gb={c:null, o:ga};return() => { let gc=gb.c;if(gc===null){ gc=gb.o();gb.c=gc;const gd=gc.s;if(gd!=null&&gd.$==0)gb.o=null;else bG(gc, () => { gb.c=null;});return gc;} else return gc;};}
function u0039(ga, gb){ return u0038(() => bN(ga, gb()));}
function $(ga){ const gb={s:ej(ga)};return() => gb;}
function ba(ga, gb){ return bb(u0039(ga, gb));}
function bb(ga){ return u0038(() => bW(ga()));}
function bc(ga, gb){ return u0038(() => bY(ga(), gb()));}
let bd={$:1};
let be={$:0};
class bf extends E { }
function bg(ga){ return ga==null?"":ga;}
function bh(ga, gb){ return bj(cO(ga, gb));}
function bi(ga, gb){ let gc=gb;while(gc.$==1){ ga(bq(gc));gc=br(gc);} }
function bj(ga){ let gb=U.Empty;for(let gc=bw(ga)-1, gd=0;gc>=gd;gc--)gb=U.Cons(bt(ga, gc), gb);return gb;}
function bk(ga, gb){ let gc;let gd;let ge;let gf;if(gb.$==0)return gb;else { const gg=f7(U, {$:1});gc=gg;gd=gb;ge=0;gf=true;while(gf){ gc.$0=ga(ge, gd.$0);gd=gd.$1;if(gd.$==0)gf=false;else { const gh=f7(U, {$:1});gc=(gc.$1=gh,gh);ge=ge+1;} } gc.$1=U.Empty;return gg;} }
function bl(ga, gb){ let gc;let gd;let ge;if(ga.$==0)return gb;else if(gb.$==0)return ga;else { const gf=f7(U, {$:1});gc=gf;gd=ga;ge=true;while(ge){ gc.$0=gd.$0;gd=gd.$1;if(gd.$==0)ge=false;else { const gg=f7(U, {$:1});gc=(gc.$1=gg,gg);} } gc.$1=gb;return gf;} }
function bm(ga){ if(ga instanceof U)return ga;else if(ga instanceof Array)return bj(ga);else { const gb=c8(ga);try { let gc;let gd=gb.MoveNext();if(!gd)return U.Empty;else { const ge=f7(U, {$:1});gc=ge;while(gd){ gc.$0=gb.Current;if(gb.MoveNext()){ const gf=f7(U, {$:1});gc=(gc.$1=gf,gf);} else gd=false;} gc.$1=U.Empty;return ge;} } finally { if(typeof gb=="object"&&a(gb))gb.Dispose();} } }
function bn(ga){ return bm(cm(ga));}
function bo(ga, gb){ let gc;let gd;let ge;if(gb.$==0)return gb;else { const gf=f7(U, {$:1});gc=gf;gd=gb;ge=true;while(ge){ gc.$0=ga(gd.$0);gd=gd.$1;if(gd.$==0)ge=false;else { const gg=f7(U, {$:1});gc=(gc.$1=gg,gg);} } gc.$1=U.Empty;return gf;} }
function bp(ga, gb){ return bm(cr(ga, gb));}
function bq(ga){ return ga.$==1?ga.$0:bs();}
function br(ga){ return ga.$==1?ga.$1:bs();}
function bs(){ return H("The input list was empty.");}
function bt(ga, gb){ bx(ga, gb);return ga[gb];}
function bu(ga, gb, gc){ by(ga, gb, gc);return ga[gb][gc];}
function bv(ga, gb, gc, gd){ by(ga, gb, gc);ga[gb][gc]=gd;}
function bw(ga){ return ga.dims===2?ga.length*ga.length:ga.length;}
function bx(ga, gb){ if(gb<0||gb>=ga.length)H("Index was outside the bounds of the array.");}
function by(ga, gb, gc){ if(gb<0||gc<0||gb>=ga.length||gc>=(ga.length?ga[0].length:0))throw new eo("New");}
function bz(ga, gb, gc){ bx(ga, gb);ga[gb]=gc;}
function bA(ga, gb){ const gc=cO(ga, () => cP(gb, null));gc.dims=2;return gc;}
let bB=f8((ga) => class gb { static { bB=ga(this);} static uploadSkinPackView;static skinPacks;static jpegQuality;static thumbSize;static { this.thumbSize=80;this.jpegQuality=0.7;this.skinPacks=c4.Create_1(U.Empty);this.uploadSkinPackView=cy.Element("input", [cx.Create("type", "file"), cx.Create("multiple", "multiple"), cx.Create("accept", "image/*"), cx.HandlerImpl("change", (gc) =>() => Z(gc))], []);} });
let bC=f8((ga) => class gb { static { bC=ga(this);} static scoreboard;static nameInputView;static diceRollView;static wins1;static wins2;static chosenSkin2;static chosenSkin1;static showDiceRoll;static diceRollAnim;static currentPlayer;static board;static namesSet;static rand;static lastWinner;static starter;static player2;static player1;static { this.player1=c4.Create_1("");this.player2=c4.Create_1("");this.starter=c4.Create_1(be);this.lastWinner=c4.Create_1(null);this.rand=new c5();this.namesSet=c4.Create_1(false);const gc=cO(3, () => cP(3, null));let gd=(gc.dims=2,gc);let ge=c4.Create_1(gd);this.board=ge;this.currentPlayer=c4.Create_1(be);this.diceRollAnim=c4.Create_1(null);this.showDiceRoll=c4.Create_1(false);this.chosenSkin1=c4.Create_1(null);this.chosenSkin2=c4.Create_1(null);const gf=[c4.Create_1(0), c4.Create_1(0)];this.wins2=gf[1];this.wins1=gf[0];this.diceRollView=cy.Element("div", [cx.Create("id", "dice-view")], [cy.Element("h2", [], [cy.TextNode("We will now choose the starter by tossing.")]), cy.Element("div", [cx.Create("style", "font-size: 45px; font-family: monospace; margin: 20px;")], [cy.TextView(u0039((gg) => gg==null?"\ud83c\udfb2 ?":"\ud83c\udfb2 "+String(gg.$0), x().View))]), cy.Element("button", [cx.HandlerImpl("click", () =>() => z())], [cy.TextNode("Throwing")])]);this.nameInputView=cy.Element("div", [], bm(cf(() => cj([cy.Element("h2", [], [cy.TextNode("Players & skin packs")])], cf(() => cj([u0030()], cf(() => cj([cy.EmbedView(u0039((gg) => cy.Element("div", [], [cy.Element("div", [cx.Create("style", "margin-top:10px;")], bm(cf(() => cj([cy.Element("label", [], [cy.TextNode("X player name: ")])], cf(() => { const gh=c();let gi=d8("style", u0039((gl) => gl==null?"border:2px solid #ccc;":"border:2px solid "+(gh===c()?"#4caf50;":"#e53935;"), gh.View));let gj=[gi, cx.Create("placeholder", "First player name")];let gk=[cy.Input(gj, t())];return cj(gk, cf(() => bk((gl, gm) => A(c(), gl, gm), gg)));}))))), cy.Element("div", [cx.Create("style", "margin-top:14px;")], bm(cf(() => cj([cy.Element("label", [], [cy.TextNode("O player name: ")])], cf(() => { const gh=c();let gi=d8("style", u0039((gl) => gl==null?"border:2px solid #ccc;":"border:2px solid "+(gh===d()?"#4caf50;":"#e53935;"), gh.View));let gj=[gi, cx.Create("placeholder", "Second player name")];let gk=[cy.Input(gj, u())];return cj(gk, cf(() => bk((gl, gm) => A(d(), gl, gm), gg)));})))))]), Y().View))], cf(() => { u0037((gg, gh, gi) => gg&&gh&&gi, u0036((gg, gh) =>!ea(gg)&&!ea(gh), t().View, u().View), u0036((gg, gh) => gg!=null&&gh!=null, c().View, d().View), $(true));return[cy.Element("button", [cx.Create("style", "margin-top:12px;"), cx.HandlerImpl("click", () =>() => { l().Set(true);return i().Set(true);})], [cy.TextNode("Start")])];})))))))));this.scoreboard=cy.Element("div", [cx.Create("style", "margin-left:20px;")], [cy.Element("h3", [], [cy.TextNode("EredmÃ©nyek")]), cy.Element("p", [], [cy.TextView(u0036((gg, gh) => bg(gg)+": "+String(gh), t().View, k().View))]), cy.Element("p", [], [cy.TextView(u0036((gg, gh) => bg(gg)+": "+String(gh), u().View, j().View))])]);} });
function bD(ga, gb, gc){ const gd=ga.s;if(gd==null)gc();else gd!=null&&gd.$==2?(gd.$1.push(gc),gb(gd.$0)):gd!=null&&gd.$==3?(gd.$0.push(gb),gd.$1.push(gc)):gb(gd.$0);}
function bE(ga, gb, gc){ const gd=gb.s;const ge=gc.s;if(gd!=null&&gd.$==0)return ge!=null&&ge.$==0?{s:ej(ga(gd.$0, ge.$0))}:bH(ga, gd.$0, gc);else if(ge!=null&&ge.$==0)return bI(ga, ge.$0, gb);else { const gf={s:ek([], [])};const gg=() => { const gh=gf.s;if(!(gh!=null&&gh.$==0||gh!=null&&gh.$==2)){ const gi=bJ(gb);const gj=bJ(gc);if(gi!=null&&gi.$==1)if(gj!=null&&gj.$==1)if(gi.$0[1]&&gj.$0[1])bK(gf, ga(gi.$0[0], gj.$0[0]));else bL(gf, ga(gi.$0[0], gj.$0[0]));} };bM(gb, gg, gf);bM(gc, gg, gf);return gf;} }
function bF(ga, gb, gc, gd){ const ge=gb.s;const gf=gc.s;const gg=gd.s;if(ge!=null&&ge.$==0)return gf!=null&&gf.$==0?gg!=null&&gg.$==0?{s:ej(ga(ge.$0, gf.$0, gg.$0))}:bO(ga, ge.$0, gf.$0, gd):gg!=null&&gg.$==0?bP(ga, ge.$0, gg.$0, gc):bQ(ga, ge.$0, gc, gd);else if(gf!=null&&gf.$==0)return gg!=null&&gg.$==0?bR(ga, gf.$0, gg.$0, gb):bS(ga, gf.$0, gb, gd);else if(gg!=null&&gg.$==0)return bT(ga, gg.$0, gb, gc);else { const gh={s:ek([], [])};const gi=() => { const gj=gh.s;if(!(gj!=null&&gj.$==0||gj!=null&&gj.$==2)){ const gk=bJ(gb);const gl=bJ(gc);const gm=bJ(gd);if(gk!=null&&gk.$==1)if(gl!=null&&gl.$==1)if(gm!=null&&gm.$==1)if(gk.$0[1]&&gl.$0[1]&&gm.$0[1])bK(gh, ga(gk.$0[0], gl.$0[0], gm.$0[0]));else bL(gh, ga(gk.$0[0], gl.$0[0], gm.$0[0]));} };bM(gb, gi, gh);bM(gc, gi, gh);bM(gd, gi, gh);return gh;} }
function bG(ga, gb){ const gc=ga.s;if(gc==null)gb();else gc!=null&&gc.$==2?gc.$1.push(gb):gc!=null&&gc.$==3?gc.$1.push(gb):void 0;}
function bH(ga, gb, gc){ return bN((gd) => ga(gb, gd), gc);}
function bI(ga, gb, gc){ return bN((gd) => ga(gd, gb), gc);}
function bJ(ga){ const gb=ga.s;return gb!=null&&gb.$==0?u0034([gb.$0, true]):gb!=null&&gb.$==2?u0034([gb.$0, false]):null;}
function bK(ga, gb){ const gc=ga.s;if(gc!=null&&gc.$==3){ ga.s=ej(gb);const gd=gc.$0;for(let ge=0, gf=bw(gd)-1;ge<=gf;ge++)(bt(gd, ge))(gb);} else void 0;}
function bL(ga, gb){ const gc=ga.s;if(gc!=null&&gc.$==3){ ga.s=el(gb, gc.$1);const gd=gc.$0;for(let ge=0, gf=bw(gd)-1;ge<=gf;ge++)(bt(gd, ge))(gb);} else void 0;}
function bM(ga, gb, gc){ const gd=ga.s;if(gd==null)c7(gc);else gd!=null&&gd.$==2?(bU(gd.$1, gc),gb(gd.$0)):gd!=null&&gd.$==3?(gd.$0.push(gb),bU(gd.$1, gc)):gb(gd.$0);}
function bN(ga, gb){ const gc=gb.s;if(gc!=null&&gc.$==0)return{s:ej(ga(gc.$0))};else { const gd={s:ek([], [])};bM(gb, (ge) => { bV(gd, gb, ga(ge));}, gd);return gd;} }
function bO(ga, gb, gc, gd){ return bN((ge) => ga(gb, gc, ge), gd);}
function bP(ga, gb, gc, gd){ return bN((ge) => ga(gb, ge, gc), gd);}
function bQ(ga, gb, gc, gd){ return bE((ge, gf) => ga(gb, ge, gf), gc, gd);}
function bR(ga, gb, gc, gd){ return bN((ge) => ga(ge, gb, gc), gd);}
function bS(ga, gb, gc, gd){ return bE((ge, gf) => ga(ge, gb, gf), gc, gd);}
function bT(ga, gb, gc, gd){ return bE((ge, gf) => ga(ge, gf, gb), gc, gd);}
function bU(ga, gb){ ga.push(gb);if(ga.length%20===0){ const gc=ga.slice(0);fj(ga);for(let ge=0, gf=bw(gc)-1;ge<=gf;ge++){ const gd=bt(gc, ge);if(typeof gd=="object")(((gg) => { if(gg.s)ga.push(gg);})(gd));else(((gg) => { ga.push(gg);})(gd));} } else void 0;}
function bV(ga, gb, gc){ const gd=gb.s;if(gd!=null&&gd.$==0)bK(ga, gc);else bL(ga, gc);}
function bW(ga){ const gb={s:ek([], [])};bM(ga, (gc) => { const gd=gc();bM(gd, (ge) => { let gf;const gg=gd.s;if(gg!=null&&gg.$==0){ const gh=ga.s;gf=gh!=null&&gh.$==0;} else gf=false;if(gf)bK(gb, ge);else bL(gb, ge);}, gb);}, gb);return gb;}
function bX(ga){ const gb=ga.s;if(gb==null)return ga;else if(gb!=null&&gb.$==2){ const gc={s:el(gb.$0, [])};bZ(ga, gc);return gc;} else if(gb!=null&&gb.$==3){ const gd={s:ek([], [])};bM(ga, (ge) => { bV(gd, ga, ge);}, gd);return gd;} else return ga;}
function bY(ga, gb){ const gc=ga.s;const gd=gb.s;if(gc!=null&&gc.$==0)return gd!=null&&gd.$==0?{s:ej(null)}:gb;else if(gd!=null&&gd.$==0)return ga;else { const ge={s:ek([], [])};const gf=() => { const gg=ge.s;if(!(gg!=null&&gg.$==0||gg!=null&&gg.$==2)){ const gh=bJ(ga);const gi=bJ(gb);if(gh!=null&&gh.$==1)if(gi!=null&&gi.$==1)if(gh.$0[1]&&gi.$0[1])bK(ge, null);else bL(ge, null);} };bM(ga, gf, ge);bM(gb, gf, ge);return ge;} }
function bZ(ga, gb){ const gc=ga.s;if(gc==null)c7(gb);else gc!=null&&gc.$==2?bU(gc.$1, gb):gc!=null&&gc.$==3?bU(gc.$1, gb):void 0;}
function b0(ga){ return(gb) => { try {(ga())(gb);} catch(gc){ gb.k(dc(gc));} };}
function b1(ga, gb){ return b5((gc) => { ga(db((gd) => { if(gd.$==0){ const ge=gd.$0;b_().Fork(() => { try {(gb(ge))(gc);} catch(gf){ gc.k(dc(gf));} });} else b_().Fork(() => { gc.k(gd);});}, gc.ct));});}
function b2(ga){ return(gb) => { let gc;let gd;gc=void 0;gd=void 0;gc=setTimeout(() => { gd.Dispose();b_().Fork(() => { gb.k(dd(null));});}, ga);gd=b6(gb.ct, () => { clearTimeout(gc);b_().Fork(() => { b7(gb);});});};}
function b3(){ return dg.Zero;}
function b4(ga, gb){ const gc=(b8())[0];const gd=gb==null?gc:gb.$0;b_().Fork(() => { if(!gd.c)ga(db((ge) => { if(ge.$==1)b9(ge.$0);}, gd));});}
function b5(ga){ return(gb) => { if(gb.ct.c)b7(gb);else ga(gb);};}
function b6(ga, gb){ if(ga===b$())return{Dispose(){ return null;}};else { const gc=ga.r.push(gb)-1;return{Dispose(){ return bz(ga.r, gc, () => { });}};} }
function b7(ga){ ga.k(de(new ep("New", ga.ct)));}
function b8(){ return dg.defCTS;}
function b9(ga){ console.log("WebSharper: Uncaught asynchronous exception", ga);}
function b_(){ return dg.scheduler;}
function b$(){ return dg.noneCT;}
function ca(ga){ return(gb) => { gb.k(dd(ga));};}
function cb(ga){ const gb=cT(ga);return bw(gb)===0?ca([]):(gc) => { const gd=gb.length;const ge=[gd];const gf=new Array(gd);for(let gg=0, gh=gd-1;gg<=gh;gg++)(((gi) => b_().Fork(() => {(bt(gb, gi))(db((gj) => { let gk;const gl=ge[0];switch(gl===0?0:gl===1?gj.$==0?1:(gk=gj,3):gj.$==0?2:(gk=gj,3)){ case 0:return null;case 1:bz(gf, gi, gj.$0);ge[0]=0;return gc.k(dd(gf));case 2:bz(gf, gi, gj.$0);{ ge[0]=gl-1;return;} break;case 3:ge[0]=0;return gc.k(gk);} }, gc.ct));}))(gg));};}
function cc(ga, gb){ const gc=(b8())[0];const gd=gb==null?gc:gb.$0;if(!gd.c)ga(db((ge) => { if(ge.$==1)b9(ge.$0);}, gd));}
function cd(ga, gb){ return b1(ga, () => gb);}
function ce(ga){ return(gb) => { const gc=[false];const gd=(ge) => { if(gc[0])H("A continuation provided by Async.FromContinuations was invoked multiple times");else { gc[0]=true;b_().Fork(ge);} };ga((ge) => { gd(() => { gb.k(dd(ge));});}, (ge) => { gd(() => { gb.k(dc(ge));});}, (ge) => { gd(() => { gb.k(de(ge));});});};}
function cf(ga){ return{GetEnumerator:() => c8(ga())};}
function cg(ga, gb){ return{GetEnumerator:() => { const gc=c8(gb);return new da(null, null, (gd) => gc.MoveNext()&&(gd.c=ga(gc.Current),true), () => { gc.Dispose();});}};}
function ch(ga, gb){ return cm(cg(ga, gb));}
function ci(ga, gb){ return!cn((gc) =>!ga(gc), gb);}
function cj(ga, gb){ return{GetEnumerator:() => { const gc=c8(ga);const gd=[true];return new da(gc, null, (ge) => { if(ge.s.MoveNext()){ ge.c=ge.s.Current;return true;} else { const gf=ge.s;if(!J(gf, null))gf.Dispose();ge.s=null;return gd[0]&&(gd[0]=false,ge.s=c8(gb),ge.s.MoveNext()?(ge.c=ge.s.Current,true):(ge.s.Dispose(),ge.s=null,false));} }, (ge) => { const gf=ge.s;if(!J(gf, null))gf.Dispose();});}};}
function ck(ga, gb){ const gc=c8(gb);try { let gd=null;while(J(gd, null)&&gc.MoveNext())gd=ga(gc.Current);return gd;} finally { if(typeof gc=="object"&&a(gc))gc.Dispose();} }
function cl(ga, gb){ return co(ga, cp(gb));}
function cm(ga){ return{GetEnumerator:() => { const gb=c8(ga);function gc(gd){ while(true){ const ge=gd.s;if(J(ge, null)){ if(gb.MoveNext()){ gd.s=c8(gb.Current);gd=gd;} else { gb.Dispose();return false;} } else if(ge.MoveNext()){ gd.c=ge.Current;return true;} else { gd.Dispose();gd.s=null;gd=gd;} } } return new da(null, null, gc, (gd) => { const ge=gd.s;if(!J(ge, null))ge.Dispose();if(!J(gb, null))gb.Dispose();});}};}
function cn(ga, gb){ const gc=c8(gb);try { let gd=false;while(!gd&&gc.MoveNext())gd=ga(gc.Current);return gd;} finally { if(typeof gc=="object"&&a(gc))gc.Dispose();} }
function co(ga, gb){ ga<0?es():void 0;return{GetEnumerator:() => { const gc=[c8(gb)];return new da(0, null, (gd) => { gd.s=gd.s+1;if(gd.s>ga)return false;else { const ge=gc[0];return J(ge, null)?et():ge.MoveNext()?(gd.c=ge.Current,gd.s===ga?(ge.Dispose(),gc[0]=null):void 0,true):(ge.Dispose(),gc[0]=null,et());} }, () => { const gd=gc[0];if(!J(gd, null))gd.Dispose();});}};}
function cp(ga){ return{GetEnumerator:() => new da(0, null, (gb) => { gb.c=ga(gb.s);gb.s=gb.s+1;return true;}, void 0)};}
function cq(ga){ const gb=c8(ga);try { return gb.MoveNext()?gb.Current:et();} finally { if(typeof gb=="object"&&a(gb))gb.Dispose();} }
function cr(ga, gb){ return ch((gc) => { const gd=ga(gc);return gd==null?U.Empty:bj([gd.$0]);}, gb);}
function cs(ga, gb, gc){ let gd=gb;const ge=c8(gc);try { while(ge.MoveNext())gd=ga(gd, ge.Current);return gd;} finally { if(typeof ge=="object"&&a(ge))ge.Dispose();} }
function ct(ga, gb){ const gc=c8(gb);try { while(gc.MoveNext())ga(gc.Current);} finally { if(typeof gc=="object"&&a(gc))gc.Dispose();} }
function cu(ga){ const gb=c8(ga);try { if(!gb.MoveNext())cv();let gc=gb.Current;while(gb.MoveNext()){ const gd=gb.Current;if(M(gd, gc)===1)gc=gd;} return gc;} finally { if(typeof gb=="object"&&a(gb))gb.Dispose();} }
function cv(){ return H("The input sequence was empty.");}
function cw(ga){ const gb={};const gc=c8(ga);try { while(gc.MoveNext()){ const gd=gc.Current;gb[gd[0]]=gd[1];} } finally { if(typeof gc=="object"&&a(gc))gc.Dispose();} return gb;}
class cx { static Create(ga, gb){ return di((gc) => { gc.setAttribute(ga, gb);});} static HandlerImpl(ga, gb){ return di((gc) => { gc.addEventListener(ga, (gd) =>(gb(gc))(gd), false);});} static Concat(ga){ const gb=eC(ga);return eD(dm(), cx.Append, gb);} static A3(ga){ return f7(cx, {$:3, $0:ga});} static Append(ga, gb){ return dl(ga, gb);} static A1(ga){ return f7(cx, {$:1, $0:ga});} static A2(ga, gb){ return f7(cx, {$:2, $0:ga, $1:gb});} }
class cy extends E { docNode;updates;static TextNode(ga){ return cy.Mk(dH(globalThis.document.createTextNode(ga)), $());} static EmbedView(ga){ const gb=dM();return cy.Mk(dI(gb), u0039(() => { }, ba((gc) => { dN(gb, gc.docNode);return gc.updates;}, ga)));} static RunById(ga, gb){ const gc=globalThis.document.getElementById(ga);if(J(gc, null))H("invalid id: "+ga);else cy.Run(gc, gb);} static Element(ga, gb, gc){ const gd=cx.Concat(gb);const ge=cy.Concat(gc);return eB.New(globalThis.document.createElement(ga), gd, ge);} static Mk(ga, gb){ return new cy(ga, gb);} static BindView(ga, gb){ return cy.EmbedView(u0039(ga, gb));} static TextView(ga){ const gb=dO();return cy.Mk(dJ(gb), u0039((gc) => { dP(gb, gc);}, ga));} static Run(ga, gb){ dQ(ga, gb.docNode);cy.RunInPlace(false, ga, gb);} static Input(ga, gb){ return cy.InputInternal("input", () => cj(ga, [d9(gb)]));} static Concat(ga){ return eD(cy.Empty, cy.Append, eC(ga));} static RunInPlace(ga, gb, gc){ const gd=dS(gb, gc.docNode);u0035(eR()||eY()?eZ(dT(ga, gd, gc.docNode)):() => { dU(ga, gd, gc.docNode);}, gc.updates);} static InputInternal(ga, gb){ const gc=globalThis.document.createElement(ga);return eB.New(gc, cx.Concat(gb(gc)), cy.Empty);} static Append(ga, gb){ return cy.Mk(dL(ga.docNode, gb.docNode), bc(ga.updates, gb.updates));} static get Empty(){ return cy.Mk(null, $());} constructor(ga, gb){ super();this.docNode=ga;this.updates=gb;} }
function cz(ga){ return cA(ga.length, ga.length?ga[0].length:0, (gb, gc) => bu(ga, gb, gc));}
function cA(ga, gb, gc){ const gd=bA(ga, gb);for(let ge=0, gf=ga-1;ge<=gf;ge++)for(let gg=0, gh=gb-1;gg<=gh;gg++)bv(gd, ge, gg, gc(ge, gg));return gd;}
function cB(ga){!cC()?(cD(true),cE(globalThis.document.body, "")):void 0;cF().set_Item(ga, cG(""));}
function cC(){ return ev.LocalTemplatesLoaded;}
function cD(ga){ ev.LocalTemplatesLoaded=ga;}
function cE(ga, gb){ const gc=cG(gb);const gd=new d6("New_5");const ge=ga.querySelectorAll("[ws-template]");for(let gq=0, gr=ge.length-1;gq<=gr;gq++){ const gf=ge[gq];const gg=gf.getAttribute("ws-template").toLowerCase();gf.removeAttribute("ws-template");gd.set_Item(gg, cH(gf));} const gh=ga.querySelectorAll("[ws-children-template]");for(let gs=0, gt=gh.length-1;gs<=gt;gs++){ const gi=gh[gs];const gj=gi.getAttribute("ws-children-template").toLowerCase();gi.removeAttribute("ws-children-template");gd.set_Item(gj, cI(gi));} const gk=ga.querySelectorAll("template[id]");for(let gu=0, gv=gk.length-1;gu<=gv;gu++){ const gl=gk[gu];gd.set_Item(gl.getAttribute("id").toLowerCase(), cJ(gl));} const gm=ga.querySelectorAll("template[name]");for(let gw=0, gx=gm.length-1;gw<=gx;gw++){ const gn=gm[gw];gd.set_Item(gn.getAttribute("name").toLowerCase(), cJ(gn));} const go=new ew("New_3");function gp(gy){ if(!gc.ContainsKey(gy)){ let gz;const gA=(gz=null,[gd.TryGetValue(gy, {get:() => gz, set:(gB) => { gz=gB;}}), gz]);if(gA[0]){ go.SAdd(gy);gd.RemoveKey(gy);cK(gb, u0034(gy), gA[1], u0034(gp));} else console.warn(go.Contains(gy)?"Encountered loop when instantiating "+gy:"Local template does not exist: "+gy);} } while(gd.count>0)gp(cq(gd.Keys));}
function cF(){ return ev.LoadedTemplates;}
function cG(ga){ let gb;const gc=(gb=null,[cF().TryGetValue(ga, {get:() => gb, set:(ge) => { gb=ge;}}), gb]);if(gc[0])return gc[1];else { const gd=new d6("New_5");cF().set_Item(ga, gd);return gd;} }
function cH(ga){ ga.removeAttribute("ws-template");const gb=ga.getAttribute("ws-replace");if(gb==null){ } else { ga.removeAttribute("ws-replace");const gc=ga.parentNode;if(J(gc, null)){ } else { const gd=globalThis.document.createElement(ga.tagName);gd.setAttribute("ws-replace", gb);gc.replaceChild(gd, ga);} } const ge=globalThis.document.createElement("div");ge.appendChild(ga);return ge;}
function cI(ga){ const gb=globalThis.document.createElement("div");while(ga.hasChildNodes())gb.appendChild(ga.firstChild);return gb;}
function cJ(ga){ const gb=globalThis.document.createElement("div");const gc=ga.content;for(let gd=0, ge=gc.childNodes.length-1;gd<=ge;gd++)gb.appendChild(gc.childNodes[gd].cloneNode(true));return gb;}
function cK(ga, gb, gc, gd){ const ge=new ew("New_3");function gf(gm, gn){ while(true)switch(gm){ case 0:if(gn!==null){ const go=gn.nextSibling;if(J(gn.nodeType, Node.TEXT_NODE))eH(gn);else if(J(gn.nodeType, Node.ELEMENT_NODE))gh(gn);gn=go;} else return null;break;case 1:const gp=eP(gn.nodeName, u0034(3), null).toLowerCase();const gq=gp.indexOf(".");const gr=gq===-1?[ga, gp]:[eP(gp, null, u0034(gq-1)), eP(gp, u0034(gq+1), null)];const gs=gr[1];const gt=gr[0];if(gt!=""&&!cF().ContainsKey(gt))return eI(gs);else { if(gt==""&&gd!=null)gd.$0(gs);const gu=cF().Item(gt);if(!gu.ContainsKey(gs))return eI(gs);else { const gv=gu.Item(gs);const gw=gv.cloneNode(true);const gx=new ew("New_3");const gy=new d6("New_5");const gz=gn.attributes;for(let gJ=0, gK=gz.length-1;gJ<=gK;gJ++){ const gA=gz.item(gJ).name.toLowerCase();const gB=gz.item(gJ).nodeValue;let gC=gB==""?gA:gB.toLowerCase();gy.set_Item(gA, gC);if(!gx.SAdd(gA))console.warn("Hole mapped twice", gA);} for(let gL=0, gM=gn.childNodes.length-1;gL<=gM;gL++){ const gD=gn.childNodes[gL];if(J(gD.nodeType, Node.ELEMENT_NODE))if(!gx.SAdd(gD.nodeName.toLowerCase()))console.warn("Hole filled twice", gs);} const gE=gn.childNodes.length===1&&J(gn.firstChild.nodeType, Node.TEXT_NODE);if(gE){ const gF=eJ(gw, gn.firstChild.textContent, gs);const gG=((gN) =>(gO) => gN.SAdd(gO))(gx);let gH=((gN) =>(gO) => { if(gO!=null)gN(gO.$0);})((gN) => { gG(gN);});gH(gF);} eK(gw, gx);if(!gE){ for(let gN=0, gO=gn.childNodes.length-1;gN<=gO;gN++){ const gI=gn.childNodes[gN];if(J(gI.nodeType, Node.ELEMENT_NODE))if(gI.hasAttributes())eL(gw, gI);else gg(gw, gI);} } eM(gw, gy);eN(gw, gn.parentNode, gn);gn.parentNode.removeChild(gn);return;} } break;} } function gg(gm, gn){ const go=gn.nodeName.toLowerCase();const gp=(gt, gu) => { if(go=="title"&&gn.hasChildNodes()){ const gv=dy(gn.textContent);gn.removeChild(gn.firstChild);while(gv.hasChildNodes())gn.appendChild(gv.firstChild);} gh(gn);return eN(gn, gt, gu);};cL(gm, "[ws-attr-holes]", (gt) => { const gu=ec(gt.getAttribute("ws-attr-holes"), [" "], 1);for(let gy=0, gz=gu.length-1;gy<=gz;gy++){ const gv=bt(gu, gy);let gw=new RegExp("\\${"+go+"}", "ig");let gx=gt.getAttribute(gv).replace(gw, gn.textContent);gt.setAttribute(gv, gx);} });const gq=gm.querySelector("[ws-hole="+go+"]");if(J(gq, null)){ const gr=gm.querySelector("[ws-replace="+go+"]");if(J(gr, null)){ const gs=gm.querySelector("slot[name="+go+"]");return gm.tagName.toLowerCase()=="template"?(gp(gs.parentNode, gs),void gs.parentNode.removeChild(gs)):null;} else { gp(gr.parentNode, gr);gr.parentNode.removeChild(gr);return;} } else { while(gq.hasChildNodes())gq.removeChild(gq.lastChild);gq.removeAttribute("ws-hole");return gp(gq, null);} } function gh(gm){ if(!gm.hasAttribute("ws-preserve"))if(ed(gm.nodeName.toLowerCase(), "ws-"))gj(gm);else { eO(gm);gi(gm.firstChild);} } function gi(gm){ return gf(0, gm);} function gj(gm){ return gf(1, gm);} function gk(gm){ while(true){ const gn=gm.querySelector("[ws-template]");if(J(gn, null)){ const go=gm.querySelector("[ws-children-template]");if(J(go, null)){ const gp=gm.querySelectorAll("template[id]");for(let gv=1, gw=gp.length-1;gv<=gw;gv++){ const gq=gp[gv];if(ge.Contains(gq)){ } else { cK(ga, u0034(gq.getAttribute("id")), gq, null);ge.SAdd(gq);} } const gr=gm.querySelectorAll("template[name]");for(let gx=1, gy=gr.length-1;gx<=gy;gx++){ const gs=gr[gx];if(ge.Contains(gs)){ } else { cK(ga, u0034(gs.getAttribute("name")), gs, null);ge.SAdd(gs);} } return null;} else { const gt=go.getAttribute("ws-children-template");go.removeAttribute("ws-children-template");cK(ga, u0034(gt), go, null);gm=gm;} } else { const gu=gn.getAttribute("ws-template");(cM(ga, u0034(gu), gn))(null);gm=gm;} } } const gl=(gb==null?"":gb.$0).toLowerCase();cG(ga).set_Item(gl, gc);if(gc.hasChildNodes()){ gk(gc);gi(gc.firstChild);} }
function cL(ga, gb, gc){ dE(ga, gb, (gd) => { if(gd.closest("[ws-preserve]")==null)gc(gd);});}
function cM(ga, gb, gc){ const gd=cH(gc);return(ge) => { cK(ga, gb, gd, ge);};}
function cN(){ return ev.TextHoleRE;}
function cO(ga, gb){ if(ga<0)H("Negative size given.");else null;const gc=new Array(ga);for(let gd=0, ge=ga-1;gd<=ge;gd++)gc[gd]=gb(gd);return gc;}
function cP(ga, gb){ const gc=new Array(ga);for(let gd=0, ge=ga-1;gd<=ge;gd++)gc[gd]=gb;return gc;}
function cQ(ga, gb){ let gc=false;let gd=0;while(!gc&&gd<bw(gb))if(ga(gb[gd]))gc=true;else gd=gd+1;return gc;}
function cR(ga, gb){ let gc=null;let gd=0;while(gd<gb.length&&gc==null){ const ge=ga(gb[gd]);if(ge!=null&&ge.$==1)gc=ge;gd=gd+1;} return gc;}
function cS(ga, gb){ let gc=null;let gd=0;while(gd<gb.length&&gc==null){ ga(gb[gd])?gc=u0034(gd):void 0;gd=gd+1;} return gc;}
function cT(ga){ if(ga instanceof Array)return ga.slice();else if(ga instanceof U)return cU(ga);else { const gb=[];const gc=c8(ga);try { while(gc.MoveNext())gb.push(gc.Current);return gb;} finally { if(typeof gc=="object"&&a(gc))gc.Dispose();} } }
function cU(ga){ const gb=[];let gc=ga;while(!(gc.$==0)){ gb.push(bq(gc));gc=br(gc);} return gb;}
function cV(ga, gb){ const gc=[];for(let gd=0, ge=gb.length-1;gd<=ge;gd++)if(ga(gb[gd]))gc.push(gb[gd]);return gc;}
function cW(ga, gb){ const gc=new Array(gb.length);for(let gd=0, ge=gb.length-1;gd<=ge;gd++)gc[gd]=ga(gb[gd]);return gc;}
function cX(ga, gb){ for(let gc=0, gd=gb.length-1;gc<=gd;gc++)ga(gb[gc]);}
function cY(ga, gb, gc){ let gd=gc;const ge=gb.length;for(let gf=1, gg=ge;gf<=gg;gf++)gd=ga(gb[ge-gf], gd);return gd;}
function cZ(ga){ return Array.prototype.concat.apply([], cT(ga));}
function c0(ga, gb){ const gc=cR(ga, gb);return gc==null?H("KeyNotFoundException"):gc.$0;}
function c1(ga, gb){ const gc=[];for(let ge=0, gf=gb.length-1;ge<=gf;ge++){ const gd=ga(gb[ge]);if(gd==null){ } else gc.push(gd.$0);} return gc;}
function c2(ga, gb){ let gc=true;let gd=0;while(gc&&gd<bw(gb))if(ga(gb[gd]))gd=gd+1;else gc=false;return gc;}
function c3(ga, gb){ return fV(ga, -2147483648, 2147483647, gb);}
let c4=f8((ga) => class gb extends E { static { c4=ga(this);} static Create_1(gc){ return new d7(false, {s:el(gc, [])}, gc);} static { } });
class c5 extends E { Next_1(ga){ return ga<0?H("'maxValue' must be greater than zero."):Math.floor(Math.random()*ga);} }
class c6 { }
function c7(ga){ let gb;const gc=ga.s;if(gc==null||(gc!=null&&gc.$==2?(gb=gc.$1,false):gc!=null&&gc.$==3?(gb=gc.$1,false):true))void 0;else { ga.s=null;for(let ge=0, gf=bw(gb)-1;ge<=gf;ge++){ const gd=bt(gb, ge);if(typeof gd=="object")(((gg) => { c7(gg);})(gd));else gd();} } }
function c8(ga){ return ga instanceof Array?c9(ga):J(typeof ga, "string")?c_(ga):ga.GetEnumerator();}
function c9(ga){ return new da(0, null, (gb) => { const gc=gb.s;return gc<bw(ga)&&(gb.c=bt(ga, gc),gb.s=gc+1,true);}, void 0);}
function c_(ga){ return new da(0, null, (gb) => { const gc=gb.s;return gc<ga.length&&(gb.c=ga[gc],gb.s=gc+1,true);}, void 0);}
function c$(ga){ return ga instanceof Array?c9(ga):J(typeof ga, "string")?c_(ga):"GetEnumerator0"in ga?ga.GetEnumerator0():ga.GetEnumerator();}
class da extends E { s;c;n;d;e;Dispose(){ if(this.d)this.d(this);} MoveNext(){ const ga=this.n(this);this.e=ga?1:2;return ga;} get Current(){ return this.e===1?this.c:this.e===0?H("Enumeration has not started. Call MoveNext."):H("Enumeration already finished.");} constructor(ga, gb, gc, gd){ super();this.s=ga;this.c=gb;this.n=gc;this.d=gd;this.e=0;} }
function db(ga, gb){ return{k:ga, ct:gb};}
function dc(ga){ return{$:1, $0:ga};}
function dd(ga){ return{$:0, $0:ga};}
function de(ga){ return{$:2, $0:ga};}
function df(ga){ let gb=[];let gc;for(var gd in ga)gb.push(ga[gd]);return gb;}
let dg=f8((ga) => class gb { static { dg=ga(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=dh(false, []);this.scheduler=new em();this.defCTS=[new eq()];this.Zero=ca();this.GetCT=(gc) => { gc.k(dd(gc.ct));};} });
function dh(ga, gb){ return{c:ga, r:gb};}
function di(ga){ return cx.A3(ga);}
function dj(ga, gb){ return cx.A1(new fi(ga, gb));}
function dk(ga){ return eE((gb) => gb.NChanged, $(), bc, ga.DynNodes);}
function dl(ga, gb){ if(ga===null)return gb;else if(gb===null)return ga;else { const gc=cx.A2(ga, gb);do_1(gc, dp(ga)|dp(gb));return gc;} }
function dm(){ return fD.EmptyAttr;}
function dn(ga, gb){ const gc=[];const gd=[];function ge(gh){ while(true){ if(!(gh===null)){ if(gh!=null&&gh.$==1)return gc.push(gh.$0);else if(gh!=null&&gh.$==2){ const gi=gh.$1;const gj=gh.$0;ge(gj);gh=gi;} else return gh!=null&&gh.$==3?gh.$0(ga):gh!=null&&gh.$==4?gd.push(gh.$0):null;} else return null;} } ge(gb);const gf=gc.slice(0);let gg=e0(ga, dp(gb), gf, gd.length===0?null:u0034((gh) => { ct((gi) => { gi(gh);}, gd);}));return gg;}
function do_1(ga, gb){ ga.flags=gb;}
function dp(ga){ return ga!==null&&ga.hasOwnProperty("flags")?ga.flags:0;}
function dq(ga){ const gb=2;return(ga.DynFlags&gb)===gb;}
function dr(ga){ return dw(ga, (gb, gc) => gb.NGetExitAnim(gc));}
function ds(ga){ const gb=1;return(ga.DynFlags&gb)===gb;}
function dt(ga){ return dw(ga, (gb, gc) => gb.NGetEnterAnim(gc));}
function du(ga){ const gb=4;return(ga.DynFlags&gb)===gb;}
function dv(ga){ return dw(ga, (gb, gc) => gb.NGetChangeAnim(gc));}
function dw(ga, gb){ return eW(cW((gc) => gb(gc, ga.DynElem), ga.DynNodes));}
function dx(ga, gb){ cX((gc) => { gc.NSync(ga);}, gb.DynNodes);}
function dy(ga){ const gb=globalThis.document.createElement("div");if(!dz().test(ga)){ gb.appendChild(globalThis.document.createTextNode(ga));return gb;} else { const gc=dD().exec(ga);const gd=J(gc, null)?"":bt(gc, 1).toLowerCase();const ge=(dA())[gd];const gf=ge?ge:dB();gb.innerHTML=gf[1]+ga.replace(dC(), "<$1></$2>")+gf[2];function gg(gh, gi){ while(true){ if(gi===0)return gh;else { const gj=gi;gh=gh.lastChild;gi=gj-1;} } } return gg(gb, gf[0]);} }
function dz(){ return fE.rhtml;}
function dA(){ return fE.wrapMap;}
function dB(){ return fE.defaultWrap;}
function dC(){ return fE.rxhtmlTag;}
function dD(){ return fE.rtagName;}
function dE(ga, gb, gc){ const gd=ga.querySelectorAll(gb);for(let ge=0, gf=gd.length-1;ge<=gf;ge++)gc(gd[ge]);}
function dF(ga, gb, gc){ let gd;if(gc.parentNode===ga){ const ge=gc.nextSibling;let gf=J(ge, null)?null:ge;gd=gb===gf;} else gd=false;if(!gd)ga.insertBefore(gc, gb);}
function dG(ga, gb){ if(gb.parentNode===ga)ga.removeChild(gb);}
function dH(ga){ return{$:5, $0:ga};}
function dI(ga){ return{$:2, $0:ga};}
function dJ(ga){ return{$:4, $0:ga};}
function dK(ga){ return{$:1, $0:ga};}
function dL(ga, gb){ return{$:0, $0:ga, $1:gb};}
function dM(){ return{Current:null, Dirty:false};}
function dN(ga, gb){ ga.Current=gb;ga.Dirty=true;}
function dO(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function dP(ga, gb){ ga.Value=gb;ga.Dirty=true;}
function dQ(ga, gb){ dR(ga, gb, null);}
function dR(ga, gb, gc){ while(true){ if(gb!=null&&gb.$==1)return dW(ga, gb.$0.El, gc);else if(gb!=null&&gb.$==2){ const gd=gb.$0;gd.Dirty=false;gb=gd.Current;} else if(gb==null)return gc;else if(gb!=null&&gb.$==4)return dW(ga, gb.$0.Text, gc);else if(gb!=null&&gb.$==5)return dW(ga, gb.$0, gc);else if(gb!=null&&gb.$==6)return cY((gg, gh) =>((((gi) =>(gj) =>(gk) => gj==null||gj.constructor===Object?dR(gi, gj, gk):dW(gi, gj, gk))(ga))(gg))(gh), gb.$0.Els, gc);else { const ge=gb.$1;const gf=gb.$0;gb=gf;gc=dR(ga, ge, gc);} } }
function dS(ga, gb){ return fl(fm(), dV(ga, dm(), gb));}
function dT(ga, gb, gc){ if(eR()){ const gd=null;return b0(() => { const ge=fn(gc);const gf=d0(gb, ge);const gg=dZ(gb, ge);return b1(eS(eT(gf, dY(gb, ge))), () => b1(dX(ga, gb), () => b1(eS(gg), () => { gb.PreviousNodes=ge;return ca(null);})));});} else return dX(ga, gb);}
function dU(ga, gb, gc){ const gd=fn(gc);d1(ga, gb.Top);gb.PreviousNodes=gd;}
function dV(ga, gb, gc){ dQ(ga, gc);const gd=dn(ga, gb);return ex.New(gd, gc, null, ga, ey(), f9(gd.OnAfterRender));}
function dW(ga, gb, gc){ dF(ga, gc, gb);return gb;}
function dX(ga, gb){ if(eY()){ const gc=(gd) => { requestAnimationFrame(() => { d1(ga, gb.Top);gd();});};return ce((gd, ge, gf) => gc.apply(null, [gd, ge, gf]));} else { d1(ga, gb.Top);return ca(null);} }
function dY(ga, gb){ return eW(cW((gc) => dr(gc.Attr), fr(fq(gb, fp((gc) => dq(gc.Attr), ga.PreviousNodes)))));}
function dZ(ga, gb){ return eW(cW((gc) => dt(gc.Attr), fr(fq(ga.PreviousNodes, fp((gc) => ds(gc.Attr), gb)))));}
function d0(ga, gb){ const gc=(ge) => du(ge.Attr);const gd=(ge) => fp(gc, ge);return eW(cW((ge) => dv(ge.Attr), fr(fs(gd(ga.PreviousNodes), gd(gb)))));}
function d1(ga, gb){!ga?d2(gb):void 0;d3(gb.Children);d4(gb);}
function d2(ga){ function gb(gc){ function gd(ge){ while(true){ if(ge!=null&&ge.$==0){ const gf=ge.$1;const gg=ge.$0;if(gd(gg))return true;else ge=gf;} else if(ge!=null&&ge.$==2){ const gh=ge.$0;if(gh.Dirty)return true;else ge=gh.Current;} else if(ge!=null&&ge.$==6){ const gi=ge.$0;return gi.Dirty||cQ(gb, gi.Holes);} else return false;} } return gd(gc.Children);} dx(ga.El, ga.Attr);if(gb(ga))d5(ga);}
function d3(ga){ while(true){ if(ga!=null&&ga.$==1)return d1(false, ga.$0);else if(ga!=null&&ga.$==2){ const gb=ga.$0;ga=gb.Current;} else if(ga==null)return null;else if(ga!=null&&ga.$==5)return null;else if(ga!=null&&ga.$==4){ const gc=ga.$0;return gc.Dirty?(gc.Text.nodeValue=gc.Value,gc.Dirty=false):null;} else if(ga!=null&&ga.$==6){ const gd=ga.$0;cX((gg) => { d1(false, gg);}, gd.Holes);cX((gg) => { dx(gg[0], gg[1]);}, gd.Attrs);return d4(gd);} else { const ge=ga.$1;const gf=ga.$0;d3(gf);ga=ge;} } }
function d4(ga){ const gb=f9(ga.Render);if(gb!=null&&gb.$==1){ gb.$0(ga.El);f_(ga, "Render", null);} }
function d5(ga){ const gb=ga.El;function gc(gg, gh){ while(true){ if(gg!=null&&gg.$==1)return gg.$0.El;else if(gg!=null&&gg.$==2){ const gi=gg.$0;if(gi.Dirty){ gi.Dirty=false;return dR(gb, gi.Current, gh);} else gg=gi.Current;} else if(gg==null)return gh;else if(gg!=null&&gg.$==4)return gg.$0.Text;else if(gg!=null&&gg.$==5)return gg.$0;else if(gg!=null&&gg.$==6){ const gj=gg.$0;if(gj.Dirty)gj.Dirty=false;return cY((gm, gn) => gm==null||gm.constructor===Object?gc(gm, gn):gm, gj.Els, gh);} else { const gk=gg.$1;const gl=gg.$0;gg=gl;gh=gc(gk, gh);} } } const gd=ga.El;fY((gg) => { dG(gd, gg);}, fX(fZ(ga), fW(ga.El, f9(ga.Delimiters))));let ge=ga.Children;const gf=f9(ga.Delimiters);gc(ge, gf!=null&&gf.$==1?gf.$0[1]:null);}
class d6 extends E { equals;hash;count;data;set_Item(ga, gb){ this.set(ga, gb);} ContainsKey(ga){ const gb=this.data[this.hash(ga)];return gb==null?false:cQ((gc) => this.equals.apply(null, [(I(gc))[0], ga]), gb);} TryGetValue(ga, gb){ const gc=this.data[this.hash(ga)];if(gc==null)return false;else { const gd=cR((ge) => { const gf=I(ge);return this.equals.apply(null, [gf[0], ga])?u0034(gf[1]):null;}, gc);return gd!=null&&gd.$==1&&(gb.set(gd.$0),true);} } RemoveKey(ga){ return this.remove(ga);} get Keys(){ return new eQ(this);} set(ga, gb){ const gc=this.hash(ga);const gd=this.data[gc];if(gd==null){ this.count=this.count+1;this.data[gc]=new Array({K:ga, V:gb});} else { const ge=cS((gf) => this.equals.apply(null, [(I(gf))[0], ga]), gd);if(ge==null){ this.count=this.count+1;gd.push({K:ga, V:gb});} else gd[ge.$0]={K:ga, V:gb};} } remove(ga){ const gb=this.hash(ga);const gc=this.data[gb];if(gc==null)return false;else { const gd=cV((ge) =>!this.equals.apply(null, [(I(ge))[0], ga]), gc);return bw(gd)<gc.length&&(this.count=this.count-1,this.data[gb]=gd,true);} } Item(ga){ return this.get(ga);} GetEnumerator(){ return c$(cZ(df(this.data)));} get(ga){ const gb=this.data[this.hash(ga)];return gb==null?eG():c0((gc) => { const gd=I(gc);return this.equals.apply(null, [gd[0], ga])?u0034(gd[1]):null;}, gb);} static New_5(){ return new this("New_5");} static New_6(ga, gb, gc){ return new this("New_6", ga, gb, gc);} constructor(ga, gb, gc, gd){ if(ga=="New_5"){ ga="New_6";gb=[];gc=J;gd=P;} if(ga=="New_6"){ const ge=gb;const gf=gc;const gg=gd;super();this.equals=gf;this.hash=gg;this.count=0;this.data=[];const gh=c8(ge);try { while(gh.MoveNext()){ const gi=gh.Current;this.set(gi.K, gi.V);} } finally { if(typeof gh=="object"&&a(gh))gh.Dispose();} } } }
class d7 extends F { isConst;current;snap;view;id;get View(){ return this.view;} Set(ga){ if(this.isConst)(((gb) => gb("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((gb) => { console.log(gb);}));else { c7(this.snap);this.current=ga;this.snap={s:el(ga, [])};} } Get(){ return this.current;} UpdateMaybe(ga){ const gb=ga(this.Get());if(gb!=null&&gb.$==1)this.Set(gb.$0);} constructor(ga, gb, gc){ super();this.isConst=ga;this.current=gc;this.snap=gb;this.view=() => this.snap;this.id=ey();} }
function d8(ga, gb){ return dj(gb, (gc) =>(gd) => gc.setAttribute(ga, gd));}
function d9(ga){ return d_(e1(), ga);}
function d_(ga, gb){ const gc=ga(gb);return cx.Append(di(gc[0]), d$(gc[1], gc[2]));}
function d$(ga, gb){ return dj(gb, ga);}
function ea(ga){ return ga==null||(new RegExp("^\\s*$")).test(ga);}
function eb(ga, gb){ return cT(gb).join(ga);}
function ec(ga, gb, gc){ return ee(ga, new RegExp("["+ef(gb.join(""))+"]"), gc);}
function ed(ga, gb){ return ga.substring(0, gb.length)==gb;}
function ee(ga, gb, gc){ return gc===1?cV((gd) => gd!=="", eg(ga, gb)):eg(ga, gb);}
function ef(ga){ return ga.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function eg(ga, gb){ return ga.split(gb);}
function eh(ga, gb){ return ci(ga, ei(gb));}
function ei(ga){ return ga==null?"":ga;}
function ej(ga){ return{$:0, $0:ga};}
function ek(ga, gb){ return{$:3, $0:ga, $1:gb};}
function el(ga, gb){ return{$:2, $0:ga, $1:gb};}
class em extends E { idle;robin;Fork(ga){ this.robin.push(ga);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const ga=Date.now();let gb=true;while(gb)if(this.robin.length===0){ this.idle=true;gb=false;} else {(this.robin.shift())();Date.now()-ga>40?(setTimeout(() => { this.tick();}, 0),gb=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class en extends E { }
class eo extends Error { static New(){ return new this("New");} static New_1(ga){ return new this("New_1", ga);} constructor(ga, gb){ if(ga=="New"){ ga="New_1";gb="Index was outside the bounds of the array.";} if(ga=="New_1"){ const gc=gb;super(gc);} } }
class ep extends Error { ct;static New(ga){ return new this("New", ga);} static New_1(ga, gb, gc){ return new this("New_1", ga, gb, gc);} constructor(ga, gb, gc, gd){ let ge;if(ga=="New"){ ge=gb;ga="New_1";gb="The operation was canceled.";gc=null;gd=ge;} if(ga=="New_1"){ const gf=gb;const gg=gc;const gh=gd;super(gf);this.inner=gg;this.ct=gh;} } }
class eq extends E { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function er(ga, gb){ let gc;if(ga<0)return null;else { gc=0;const gd=c8(gb);try { let ge=true;while(ge&&gc<=ga)if(gd.MoveNext())gc=gc+1;else ge=false;return ge?u0034(gd.Current):null;} finally { if(typeof gd=="object"&&a(gd))gd.Dispose();} } }
function es(){ return H("The input must be non-negative.");}
function et(){ return H("The input sequence has an insufficient number of elements.");}
function eu(ga, gb){ let gc=true;let gd=0;while(gc&&gd<bw(gb))if(J(gb[gd], ga))gc=false;else gd=gd+1;return!gc;}
let ev=f8((ga) => class gb { static { ev=ga(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new d6("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new d6("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
class ew extends E { equals;hash;data;count;SAdd(ga){ return this.add(ga);} Contains(ga){ const gb=this.data[this.hash(ga)];return gb==null?false:this.arrContains(ga, gb);} add(ga){ const gb=this.hash(ga);const gc=this.data[gb];return gc==null?(this.data[gb]=[ga],this.count=this.count+1,true):this.arrContains(ga, gc)?false:(gc.push(ga),this.count=this.count+1,true);} arrContains(ga, gb){ let gc=true;let gd=0;const ge=gb.length;while(gc&&gd<ge)if(this.equals.apply(null, [gb[gd], ga]))gc=false;else gd=gd+1;return!gc;} GetEnumerator(){ return c8(fK(this.data));} ExceptWith(ga){ const gb=c8(ga);try { while(gb.MoveNext())this.Remove(gb.Current);} finally { if(typeof gb=="object"&&a(gb))gb.Dispose();} } get Count(){ return this.count;} IntersectWith(ga){ const gb=new ew("New_4", ga, this.equals, this.hash);const gc=fK(this.data);for(let ge=0, gf=gc.length-1;ge<=gf;ge++){ const gd=gc[ge];if(!gb.Contains(gd))this.Remove(gd);} } Remove(ga){ const gb=this.data[this.hash(ga)];return gb==null?false:this.arrRemove(ga, gb)&&(this.count=this.count-1,true);} CopyTo(ga, gb){ const gc=fK(this.data);for(let gd=0, ge=gc.length-1;gd<=ge;gd++)bz(ga, gd+gb, gc[gd]);} arrRemove(ga, gb){ let gc=true;let gd=0;const ge=gb.length;while(gc&&gd<ge)if(this.equals.apply(null, [gb[gd], ga])){ gb.splice(gd, 1);gc=false;} else gd=gd+1;return!gc;} static New_3(){ return new this("New_3");} static New_4(ga, gb, gc){ return new this("New_4", ga, gb, gc);} static New_2(ga){ return new this("New_2", ga);} constructor(ga, gb, gc, gd){ if(ga=="New_3"){ ga="New_4";gb=[];gc=J;gd=P;} let ge;if(ga=="New_2"){ ge=gb;ga="New_4";gb=ge;gc=J;gd=P;} if(ga=="New_4"){ const gf=gb;const gg=gc;const gh=gd;super();this.equals=gg;this.hash=gh;this.data=[];this.count=0;const gi=c8(gf);try { while(gi.MoveNext())this.add(gi.Current);} finally { if(typeof gi=="object"&&a(gi))gi.Dispose();} } } }
class ex { Attr;Children;Delimiters;El;ElKey;Render;Equals(ga){ return this.ElKey===ga.ElKey;} GetHashCode(){ return this.ElKey;} static New(ga, gb, gc, gd, ge, gf){ const gg={Attr:ga, Children:gb, El:gd, ElKey:ge};let gh=(f_(gg, "Delimiters", gc),f_(gg, "Render", gf),gg);return f7(ex, gh);} }
function ey(){ ez(eA()+1);return eA();}
function ez(ga){ fC.counter=ga;}
function eA(){ return fC.counter;}
class eB extends cy { docNode_1;updates_1;elt;rvUpdates;static New(ga, gb, gc){ const gd=dV(ga, gb, gc.docNode);const ge=fk.Create(gc.updates);return new eB(dK(gd), bc(dk(gd.Attr), ge.v), ga, ge);} constructor(ga, gb, gc, gd){ super(ga, gb);this.docNode_1=ga;this.updates_1=gb;this.elt=gc;this.rvUpdates=gd;} }
function eC(ga){ if(ga instanceof Array)return ga;else if(ga instanceof U)return cU(ga);else if(ga===null)return[];else { const gb=[];const gc=c8(ga);try { while(gc.MoveNext())gb.push(gc.Current);return gb;} finally { if(typeof gc=="object"&&a(gc))gc.Dispose();} } }
function eD(ga, gb, gc){ const gd=bw(gc);function ge(gf){ return(gg) => { let gh;switch(gg<=0?0:gg===1?gf>=0&&gf<gd?1:(gh=gg,2):(gh=gg,2)){ case 0:return ga;case 1:return bt(gc, gf);case 2:const gi=gg/2>>0;return gb((ge(gf))(gi), (ge(gf+gi))(gg-gi));} };} return(ge(0))(gd);}
function eE(ga, gb, gc, gd){ const ge=bw(gd);function gf(gg){ return(gh) => { let gi;switch(gh<=0?0:gh===1?gg>=0&&gg<ge?1:(gi=gh,2):(gi=gh,2)){ case 0:return gb;case 1:return ga(bt(gd, gg));case 2:const gj=gh/2>>0;return gc((gf(gg))(gj), (gf(gg+gj))(gh-gj));} };} return(gf(0))(ge);}
class eF extends E { }
function eG(){ throw new fN("New");}
function eH(ga){ let gb=null;let gc=0;const gd=ga.textContent;const ge=new RegExp(cN(), "g");while(gb=ge.exec(gd),gb!==null){ ga.parentNode.insertBefore(globalThis.document.createTextNode(eP(gd, u0034(gc), u0034(ge.lastIndex-bt(gb, 0).length-1))), ga);gc=ge.lastIndex;const gf=globalThis.document.createElement("span");gf.setAttribute("ws-replace", bt(gb, 1).toLowerCase());ga.parentNode.insertBefore(gf, ga);} ge.lastIndex=0;ga.textContent=eP(gd, u0034(gc), null);}
function eI(ga){ console.warn("Instantiating non-loaded template", ga);}
function eJ(ga, gb, gc){ const gd=ga.querySelector("[ws-replace]");return J(gd, null)?(console.warn("Filling non-existent text hole", gc),null):(gd.parentNode.replaceChild(globalThis.document.createTextNode(gb), gd),u0034(gd.getAttribute("ws-replace")));}
function eK(ga, gb){ const gc=(gd) => { cL(ga, "["+gd+"]", (ge) => { if(!gb.Contains(ge.getAttribute(gd)))ge.removeAttribute(gd);});};gc("ws-attr");gc("ws-onafterrender");gc("ws-var");cL(ga, "[ws-hole]", (gd) => { if(!gb.Contains(gd.getAttribute("ws-hole"))){ gd.removeAttribute("ws-hole");while(gd.hasChildNodes())gd.removeChild(gd.lastChild);} });cL(ga, "[ws-replace]", (gd) => { if(!gb.Contains(gd.getAttribute("ws-replace")))gd.parentNode.removeChild(gd);});cL(ga, "[ws-on]", (gd) => { gd.setAttribute("ws-on", eb(" ", cV((ge) => gb.Contains(bt(ec(ge, [":"], 1), 1)), ec(gd.getAttribute("ws-on"), [" "], 1))));});cL(ga, "[ws-attr-holes]", (gd) => { const ge=ec(gd.getAttribute("ws-attr-holes"), [" "], 1);for(let gi=0, gj=ge.length-1;gi<=gj;gi++){ const gf=bt(ge, gi);let gg=new RegExp(cN(), "g");let gh=gd.getAttribute(gf).replace(gg, (gk, gl) => gb.Contains(gl)?gk:"");gd.setAttribute(gf, gh);} });}
function eL(ga, gb){ eO(gb);const gc=gb.nodeName.toLowerCase();const gd=ga.querySelector("[ws-attr="+gc+"]");if(J(gd, null))console.warn("Filling non-existent attr hole", gc);else { gd.removeAttribute("ws-attr");for(let gf=0, gg=gb.attributes.length-1;gf<=gg;gf++){ const ge=gb.attributes.item(gf);if(ge.name=="class"&&gd.hasAttribute("class"))gd.setAttribute("class", gd.getAttribute("class")+" "+ge.nodeValue);else gd.setAttribute(ge.name, ge.nodeValue);} } }
function eM(ga, gb){ const gc=(gd) => { cL(ga, "["+gd+"]", (ge) => { let gf;const gg=(gf=null,[gb.TryGetValue(ge.getAttribute(gd).toLowerCase(), {get:() => gf, set:(gh) => { gf=gh;}}), gf]);if(gg[0])ge.setAttribute(gd, gg[1]);});};gc("ws-hole");gc("ws-replace");gc("ws-attr");gc("ws-onafterrender");gc("ws-var");cL(ga, "[ws-on]", (gd) => { gd.setAttribute("ws-on", eb(" ", cW((ge) => { let gf;const gg=ec(ge, [":"], 1);const gh=(gf=null,[gb.TryGetValue(bt(gg, 1), {get:() => gf, set:(gi) => { gf=gi;}}), gf]);return gh[0]?bt(gg, 0)+":"+gh[1]:ge;}, ec(gd.getAttribute("ws-on"), [" "], 1))));});cL(ga, "[ws-attr-holes]", (gd) => { const ge=ec(gd.getAttribute("ws-attr-holes"), [" "], 1);for(let gf=0, gg=ge.length-1;gf<=gg;gf++)((() => { const gh=bt(ge, gf);return gd.setAttribute(gh, cs((gi, gj) => { const gk=I(gj);return gi.replace(new RegExp("\\${"+gk[0]+"}", "ig"), "${"+gk[1]+"}");}, gd.getAttribute(gh), gb));})());});}
function eN(ga, gb, gc){ while(true){ if(ga.hasChildNodes())gc=gb.insertBefore(ga.lastChild, gc);else return null;} }
function eO(ga){ const gb=ga.attributes;const gc=[];const gd=[];const ge=[];for(let gj=0, gk=gb.length-1;gj<=gk;gj++){ const gf=gb.item(gj);if(ed(gf.nodeName, "ws-on")&&gf.nodeName!="ws-onafterrender"&&gf.nodeName!="ws-on"){ gc.push(gf.nodeName);gd.push(eP(gf.nodeName, u0034("ws-on".length), null)+":"+gf.nodeValue.toLowerCase());} else if(!ed(gf.nodeName, "ws-")&&(new RegExp(cN())).test(gf.nodeValue)){ let gg=new RegExp(cN(), "g");let gh=gf.nodeValue.replace(gg, (gl, gm) =>"${"+gm.toLowerCase()+"}");gf.nodeValue=gh;ge.push(gf.nodeName);} else void 0;} if(!(gd.length==0))ga.setAttribute("ws-on", eb(" ", gd));if(!(ge.length==0))ga.setAttribute("ws-attr-holes", eb(" ", ge));const gi=(gl) => { const gm=ga.getAttribute(gl);if(gm==null){ } else ga.setAttribute(gl, gm.toLowerCase());};gi("ws-hole");gi("ws-replace");gi("ws-attr");gi("ws-onafterrender");gi("ws-var");cX((gl) => { ga.removeAttribute(gl);}, gc);}
function eP(ga, gb, gc){ if(gb==null){ if(gc!=null&&gc.$==1){ const gd=gc.$0;return gd<0?"":ga.slice(0, gd+1);} else return"";} else if(gc==null)return ga.slice(gb.$0);else { const ge=gc.$0;return ge<0?"":ga.slice(gb.$0, ge+1);} }
class eQ extends E { d;GetEnumerator(){ return c8(cg((ga) => ga.K, this.d));} constructor(ga){ super();this.d=ga;} }
function eR(){ return ft();}
function eS(ga){ const gb=null;return b0(() => b1(eU(() => { }, fu(ga)), () => { fv(ga);return ca(null);}));}
function eT(ga, gb){ return eV(fG(ga.$0, gb.$0));}
function eU(ga, gb){ const gc=gb.Duration;if(gc===0)return b3();else { const gd=(ge) => { function gf(gg){ return(gh) => { const gi=gh-gg;gb.Compute(gi);ga();return gi<=gc?void requestAnimationFrame((gj) => {(gf(gg))(gj);}):ge();};} requestAnimationFrame((gg) => {(gf(gg))(gg);});};return ce((ge, gf, gg) => gd.apply(null, [ge, gf, gg]));} }
function eV(ga){ return{$:0, $0:ga};}
function eW(ga){ return eV(fI(cg(fx, ga)));}
function eX(){ return eV(fJ());}
function eY(){ return fB.BatchUpdatesEnabled;}
function eZ(ga){ const gb=[0];function gc(){ const gd=null;return b0(() => b1(ga, () => { const ge=gb[0];return J(ge, 1)?(gb[0]=0,b3()):J(ge, 2)?(gb[0]=1,gc()):b3();}));} return() => { const gd=gb[0];if(J(gd, 0)){ gb[0]=1;b4(gc(), null);} else J(gd, 1)?gb[0]=2:void 0;};}
function e0(ga, gb, gc, gd){ const ge={DynElem:ga, DynFlags:gb, DynNodes:gc};f_(ge, "OnAfterRender", gd);return ge;}
function e1(){ return fD.StringApply;}
function e2(ga, gb, gc){ let gd;gd=null;return[(ge) => { const gf=() => { gc.UpdateMaybe((gg) => { let gh;gd=ga(ge);return gd!=null&&gd.$==1&&(!J(gd.$0, gg)&&(gh=[gd, gd.$0],true))?gh[0]:null;});};ge.addEventListener("change", gf);ge.addEventListener("input", gf);ge.addEventListener("keypress", gf);}, (ge) => { const gf=gb(ge);return(gg) => gg==null?null:gf(gg.$0);}, u0039((ge) => { let gf;return gd!=null&&gd.$==1&&(J(gd.$0, ge)&&(gf=gd.$0,true))?null:u0034(ge);}, gc.View)];}
function e3(){ return fD.StringSet;}
function e4(){ return fD.StringGet;}
function e5(){ return fD.StringListSet;}
function e6(){ return fD.StringListGet;}
function e7(){ return fD.DateTimeSetUnchecked;}
function e8(){ return fD.DateTimeGetUnchecked;}
function e9(ga, gb, gc){ let gd;gd=null;return[(ge) => { ge.addEventListener("change", () => { gc.UpdateMaybe((gf) => { let gg;gd=ga(ge);return gd!=null&&gd.$==1&&(gd.$0!==gf&&(gg=[gd, gd.$0],true))?gg[0]:null;});});}, (ge) => { const gf=gb(ge);return(gg) => gg==null?null:gf(gg.$0);}, u0039((ge) => { let gf;return gd!=null&&gd.$==1&&(J(gd.$0, ge)&&(gf=gd.$0,true))?null:u0034(ge);}, gc.View)];}
function e_(){ return fD.FileSetUnchecked;}
function e$(){ return fD.FileGetUnchecked;}
function fa(){ return fD.IntSetUnchecked;}
function fb(){ return fD.IntGetUnchecked;}
function fc(){ return fD.IntSetChecked;}
function fd(){ return fD.IntGetChecked;}
function fe(){ return fD.FloatSetUnchecked;}
function ff(){ return fD.FloatGetUnchecked;}
function fg(){ return fD.FloatSetChecked;}
function fh(){ return fD.FloatGetChecked;}
class fi extends E { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(ga){ return eX();} NGetEnterAnim(ga){ return eX();} NGetChangeAnim(ga){ return eX();} NSync(ga){ if(this.dirty){(this.push(ga))(this.value);this.dirty=false;} } constructor(ga, gb){ super();this.push=gb;this.value=void 0;this.dirty=false;this.updates=u0039((gc) => { this.value=gc;this.dirty=true;}, ga);} }
function fj(ga){ ga.splice(0, bw(ga));}
class fk { c;s;v;static Create(ga){ let gb;gb=null;gb=fk.New(ga, null, () => { let gc;gc=gb.s;return gc===null?(gc=bX(gb.c()),gb.s=gc,bG(gc, () => { gb.s=null;}),gc):gc;});return gb;} static New(ga, gb, gc){ return f7(fk, {c:ga, s:gb, v:gc});} }
function fl(ga, gb){ return{PreviousNodes:ga, Top:gb};}
function fm(){ return fo(new ew("New_3"));}
function fn(ga){ const gb=[];function gc(gf, gg){ while(true)switch(gf){ case 0:if(gg!=null&&gg.$==0){ const gh=gg.$1;const gi=gg.$0;gc(0, gi);gg=gh;} else if(gg!=null&&gg.$==1){ const gj=gg.$0;gg=gj;gf=1;} else if(gg!=null&&gg.$==2){ const gk=gg.$0;gg=gk.Current;} else if(gg!=null&&gg.$==6){ const gl=gg.$0.Holes;return(((gm) =>(gn) => { cX(gm, gn);})(ge))(gl);} else return null;break;case 1:gb.push(gg);gg=gg.Children;gf=0;break;} } function gd(gf){ return gc(0, gf);} function ge(gf){ return gc(1, gf);} gd(ga);return fo(new ew("New_2", gb));}
function fo(ga){ return{$:0, $0:ga};}
function fp(ga, gb){ return fo(fP(ga, gb.$0));}
function fq(ga, gb){ return fo(fQ(ga.$0, gb.$0));}
function fr(ga){ return fR(ga.$0);}
function fs(ga, gb){ return fo(fS(ga.$0, gb.$0));}
function ft(){ return fF.UseAnimations;}
function fu(ga){ return fw(c1((gb) => gb.$==1?u0034(gb.$0):null, fH(ga.$0)));}
function fv(ga){ cX((gb) => { if(gb.$==0)gb.$0();}, fH(ga.$0));}
function fw(ga){ const gb=eC(ga);const gc=bw(gb);if(gc===0)return fy();else if(gc===1)return bt(gb, 0);else { const gd=cu(cg((gf) => gf.Duration, gb));const ge=cW((gf) => fA(gd, gf), gb);return fz(gd, (gf) => { cX((gg) => { gg.Compute(gf);}, ge);});} }
function fx(ga){ return ga.$0;}
function fy(ga){ return fz(0, () => ga);}
function fz(ga, gb){ return{Compute:gb, Duration:ga};}
function fA(ga, gb){ const gc=gb.Compute;const gd=gb.Duration;const ge=f1(() => gb.Compute(gb.Duration));return{Compute:(gf) => gf>=gd?ge.f():gc(gf), Duration:ga};}
let fB=f8((ga) => class gb { static { fB=ga(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
let fC=f8((ga) => class gb { static { fC=ga(this);} static counter;static { this.counter=0;} });
let fD=f8((ga) => class gb { static { fD=ga(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(gs) =>[(gt) => { gt.addEventListener("change", () => gs.Get()!=gt.checked?gs.Set(gt.checked):null);}, (gt) =>(gu) => gu!=null&&gu.$==1?void(gt.checked=gu.$0):null, u0039(u0034, gs.View)];this.StringSet=(gs) =>(gt) => { gs.value=gt;};this.StringGet=(gs) => u0034(gs.value);const gc=e4();const gd=e3();this.StringApply=(gs) => e2(gc, gd, gs);this.StringListSet=(gs) =>(gt) => { const gu=gs.options;for(let gv=0, gw=gu.length-1;gv<=gw;gv++)((() => { const gx=gu.item(gv);gx.selected=eu(gx.value, gt);})());};this.StringListGet=(gs) => { const gt=gs.selectedOptions;return u0034(cT(cf(() => ch((gu) =>[gt.item(gu).value], G(0, gt.length-1)))));};const ge=e6();const gf=e5();this.StringListApply=(gs) => e2(ge, gf, gs);this.DateTimeSetUnchecked=(gs) =>(gt) => { gs.value=(new Date(gt)).toLocaleString();};this.DateTimeGetUnchecked=(gs) => { let gt;let gu;const gv=gs.value;if(fL(gv))return u0034(-8640000000000000);else { gt=0;const gw=fU(gv);let gx=gw!=null&&gw.$==1&&(gt=gw.$0,true);gu=[gx, gt];return gu[0]?u0034(gu[1]):null;} };const gg=e8();const gh=e7();this.DateTimeApplyUnchecked=(gs) => e2(gg, gh, gs);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(gs) => { const gt=gs.files;return u0034(cT(cf(() => cg((gu) => gt.item(gu), G(0, gt.length-1)))));};const gi=e$();const gj=e_();this.FileApplyUnchecked=(gs) => e9(gi, gj, gs);this.IntSetUnchecked=(gs) =>(gt) => { gs.value=String(gt);};this.IntGetUnchecked=(gs) => { const gt=gs.value;if(fL(gt))return u0034(0);else { const gu=+gt;return gu!==gu>>0?null:u0034(gu);} };const gk=fb();const gl=fa();this.IntApplyUnchecked=(gs) => e2(gk, gl, gs);this.IntSetChecked=(gs) =>(gt) => { const gu=gt.Input;return gs.value!=gu?void(gs.value=gu):null;};this.IntGetChecked=(gs) => { let gt;let gu;const gv=gs.value;if(fL(gv))gt=(gs.checkValidity?gs.checkValidity():true)?fM.Blank(gv):fM.Invalid(gv);else { const gw=(gu=0,[c3(gv, {get:() => gu, set:(gx) => { gu=gx;}}), gu]);gt=gw[0]?fM.Valid(gw[1], gv):fM.Invalid(gv);} return u0034(gt);};const gm=fd();const gn=fc();this.IntApplyChecked=(gs) => e2(gm, gn, gs);this.FloatSetUnchecked=(gs) =>(gt) => { gs.value=String(gt);};this.FloatGetUnchecked=(gs) => { const gt=gs.value;if(fL(gt))return u0034(0);else { const gu=+gt;return isNaN(gu)?null:u0034(gu);} };const go=ff();const gp=fe();this.FloatApplyUnchecked=(gs) => e2(go, gp, gs);this.FloatSetChecked=(gs) =>(gt) => { const gu=gt.Input;return gs.value!=gu?void(gs.value=gu):null;};this.FloatGetChecked=(gs) => { let gt;const gu=gs.value;if(fL(gu))gt=(gs.checkValidity?gs.checkValidity():true)?fM.Blank(gu):fM.Invalid(gu);else { const gv=+gu;gt=isNaN(gv)?fM.Invalid(gu):fM.Valid(gv, gu);} return u0034(gt);};const gq=fh();const gr=fg();this.FloatApplyChecked=(gs) => e2(gq, gr, gs);} });
let fE=f8((ga) => class gb { static { fE=ga(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const gc=[1, "<table>", "</table>"];let gd=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", gc], ["tbody", gc], ["tfoot", gc], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=gd;this.defaultWrap=[0, "", ""];} });
let fF=f8((ga) => class gb { static { fF=ga(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=fO.Custom((gc) => { const gd=gc*gc;return 3*gd-2*(gd*gc);});this.UseAnimations=true;} });
function fG(ga, gb){ return ga.$==0?gb:gb.$==0?ga:{$:2, $0:ga, $1:gb};}
function fH(ga){ const gb=[];function gc(gd){ while(true){ if(gd.$==1)return gb.push(gd.$0);else if(gd.$==2){ const ge=gd.$1;const gf=gd.$0;gc(gf);gd=ge;} else return gd.$==3?cX((gg) => { gb.push(gg);}, gd.$0):null;} } gc(ga);return gb.slice(0);}
function fI(ga){ const gb=eC(ga);return eD(fJ(), fG, gb);}
function fJ(){ return f4.Empty;}
function fK(ga){ let gb=[];let gc;for(var gd in ga)gb.push.apply(gb, ga[gd]);return gb;}
function fL(ga){ return eh(fT, ga);}
class fM { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(ga){ return f7(fM, {$:2, $0:ga});} static Invalid(ga){ return f7(fM, {$:1, $0:ga});} static Valid(ga, gb){ return f7(fM, {$:0, $0:ga, $1:gb});} }
class fN extends Error { static New(){ return new this("New");} static New_1(ga){ return new this("New_1", ga);} constructor(ga, gb){ if(ga=="New"){ ga="New_1";gb="The given key was not present in the dictionary.";} if(ga=="New_1"){ const gc=gb;super(gc);} } }
class fO extends E { transformTime;static Custom(ga){ return new fO(ga);} constructor(ga){ super();this.transformTime=ga;} }
function fP(ga, gb){ return new ew("New_2", cV(ga, fR(gb)));}
function fQ(ga, gb){ const gc=new ew("New_2", fR(gb));gc.ExceptWith(fR(ga));return gc;}
function fR(ga){ const gb=cP(ga.Count, void 0);ga.CopyTo(gb, 0);return gb;}
function fS(ga, gb){ const gc=new ew("New_2", fR(ga));gc.IntersectWith(fR(gb));return gc;}
function fT(ga){ return ga.match(new RegExp("\\s"))!==null;}
function fU(ga){ const gb=Date.parse(ga);return isNaN(gb)?null:u0034(gb);}
function fV(ga, gb, gc, gd){ const ge=+ga;const gf=ge===ge-ge%1&&ge>=gb&&ge<=gc;if(gf)gd.set(ge);return gf;}
function fW(ga, gb){ let gc;if(gb!=null&&gb.$==1){ const gd=[];gc=gb.$0[0].nextSibling;while(gc!==gb.$0[1]){ gd.push(gc);gc=gc.nextSibling;} return f0(gd);} else { let ge=ga.childNodes.length;const gf=ga.childNodes;let gg=cO(ge, (gh) => gf[gh]);return f0(gg);} }
function fX(ga, gb){ const gc=ga.$0;return f0(cV((gd) => c2((ge) =>!(gd===ge), gc), gb.$0));}
function fY(ga, gb){ cX(ga, gb.$0);}
function fZ(ga){ const gb=[];function gc(gd){ while(true){ if(gd!=null&&gd.$==2){ const ge=gd.$0;gd=ge.Current;} else if(gd!=null&&gd.$==1)return gb.push(gd.$0.El);else if(gd==null)return null;else if(gd!=null&&gd.$==5)return gb.push(gd.$0);else if(gd!=null&&gd.$==4)return gb.push(gd.$0.Text);else if(gd!=null&&gd.$==6){ const gf=gd.$0.Els;return(((gi) =>(gj) => { cX(gi, gj);})((gi) => { if(gi==null||gi.constructor===Object)gc(gi);else gb.push(gi);}))(gf);} else { const gg=gd.$1;const gh=gd.$0;gc(gh);gd=gg;} } } gc(ga.Children);return f0(eC(gb));}
function f0(ga){ return{$:0, $0:ga};}
function f1(ga){ return f5(false, ga, f2);}
function f2(){ const ga=this.v();this.c=true;this.v=ga;this.f=f3;return ga;}
function f3(){ return this.v;}
let f4=f8((ga) => class gb { static { f4=ga(this);} static Empty;static { this.Empty={$:0};} });
function f5(ga, gb, gc){ return{c:ga, v:gb, f:gc};}
f$(() => { b();});
f6();

